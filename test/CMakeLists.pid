function(create_test test)
    declare_PID_Component(
        TEST_APPLICATION
        NAME  ${test}
        DIRECTORY ${test}
    )

    declare_PID_Component_Dependency(
        COMPONENT ${test}
        EXPORT NATIVE rscl
    )

    run_PID_Test(
        NAME test-${test}
        COMPONENT ${test})

    set(PY_TEST_FILE "${CMAKE_CURRENT_SOURCE_DIR}/${test}/${test}.py")
    if(RUN_PYTHON_TESTS AND EXISTS ${PY_TEST_FILE})
        add_test(NAME "test-${test}-py" COMMAND ${PYTHON_EXECUTABLE} ${PY_TEST_FILE})
    endif()
endfunction()
